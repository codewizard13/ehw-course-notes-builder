<!DOCTYPE html>
<html>
<head>
<title>EHD_VIDNOT_20221121_LL_JSEss_2021__WIP__01.md</title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

<style>
/* https://github.com/microsoft/vscode/blob/master/extensions/markdown-language-features/media/markdown.css */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: var(--vscode-markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--vscode-markdown-font-size, 14px);
	padding: 0 26px;
	line-height: var(--vscode-markdown-line-height, 22px);
	word-wrap: break-word;
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}

body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-light.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-dark.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

.vscode-high-contrast.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	text-decoration: none;
}

a:hover {
	text-decoration: underline;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left-width: 5px;
	border-left-style: solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 1em;
	line-height: 1.357em;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

pre code {
	color: var(--vscode-editor-foreground);
	tab-size: 4;
}

/** Theming */

.vscode-light pre {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

</style>

<style>
/* Tomorrow Theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
/* Original theme - https://github.com/chriskempson/tomorrow-theme */

/* Tomorrow Comment */
.hljs-comment,
.hljs-quote {
	color: #8e908c;
}

/* Tomorrow Red */
.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion {
	color: #c82829;
}

/* Tomorrow Orange */
.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link {
	color: #f5871f;
}

/* Tomorrow Yellow */
.hljs-attribute {
	color: #eab700;
}

/* Tomorrow Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition {
	color: #718c00;
}

/* Tomorrow Blue */
.hljs-title,
.hljs-section {
	color: #4271ae;
}

/* Tomorrow Purple */
.hljs-keyword,
.hljs-selector-tag {
	color: #8959a8;
}

.hljs {
	display: block;
	overflow-x: auto;
	color: #4d4d4c;
	padding: 0.5em;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}
</style>

<style>
/*
 * Markdown PDF CSS
 */

 body {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";
	padding: 0 12px;
}

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

code {
	font-size: 14px;
	line-height: 19px;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
.page {
	page-break-after: always;
}

</style>

<script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
</head>
<body>
  <script>
    mermaid.initialize({
      startOnLoad: true,
      theme: document.body.classList.contains('vscode-dark') || document.body.classList.contains('vscode-high-contrast')
          ? 'dark'
          : 'default'
    });
  </script>
<link rel="stylesheet" href="css/ehd-course-notes.css" />
<h1 id="course-notes">COURSE NOTES</h1>
<h3 id="span-class%22course-title%22javascript-essential-training-2021span"><span class="course-title">JavaScript Essential Training (2021)</span></h3>
<h2 id="course-info">COURSE INFO</h2>
<table>
<thead>
<tr>
<th>Title:</th>
<th>JavaScript Essential Training</th>
</tr>
</thead>
<tbody>
<tr>
<td>URL:</td>
<td>https://www.linkedin.com/learning/javascript-essential-training</td>
</tr>
<tr>
<td>Channel:</td>
<td>LinkedIn Learning</td>
</tr>
<tr>
<td>Instructor:</td>
<td>Morten Rand-Hendriksen</td>
</tr>
<tr>
<td>Release Date:</td>
<td>2021-01-20</td>
</tr>
<tr>
<td>Date Started:</td>
<td>2022-11-21</td>
</tr>
<tr>
<td>Date Completed:</td>
<td>--</td>
</tr>
<tr>
<td>File Name:</td>
<td>EHD_VIDNOT_20221121_LL_JSEss_2021__WIP__01.md</td>
</tr>
</tbody>
</table>
<p>Tag String Links: [<a href="https://www.linkedin.com/learning/search?keywords=JavaScript">JavaScript</a>]</p>
<p>Tag String Text: <code>JavaScript</code></p>
<!-- SEC: COURSE PREVIEW -->
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Author Image:</td>
<td><img src="img/person-morten-rand-hendriksen-1.jpg" alt=""></td>
</tr>
<tr>
<td>Course Thumb:</td>
<td><img src="img/course-thumb-linkedin--js-ess-2021-1.jpg" alt=""></td>
</tr>
</tbody>
</table>
<!-- END SEC: COURSE PREVIEW -->
<h2 id="course-details">COURSE DETAILS</h2>
<ul>
<li>Course Duration: 5h 29m</li>
<li>Experience Level: Beginner</li>
<li>Released: 1/20/2021</li>
</ul>
<h4 id="skills-covered">Skills Covered</h4>
<p><a href="https://www.linkedin.com/learning/search?keywords=WordPress">WordPress</a></p>
<h3 id="description">Description:</h3>
<p>JavaScript is a scripting language of the web. As the web evolves from a static to a dynamic environment, technology focus is shifting from static markup and styling—frequently handled by content management systems or automated scripts—to dynamic interfaces and advanced interaction. Once seen as optional, JavaScript is now becoming an integral part of the web, infusing every layer with its script.<br><br>Through practical examples and mini-projects, this course helps you build your understanding of JavaScript piece by piece, from core principles like variables, data types, conditionals, and functions through advanced topics including loops, and DOM scripting. Along the way, instructor Morten Rand-Hendriksen provides challenges that allow you to put your new skills to the test.</p>
<h3 id="learning-objectives">Learning objectives</h3>
<ul>
<li>N/A</li>
</ul>
<h2 id="instructor">Instructor</h2>
<h2 style="color: brown; background: pink; padding: 2em;">INSTRUCTOR INFO  GOES HERE</h2>
<h2 id="end-01---intro-page">--- [END 01 - Intro Page] ---</h2>
<h2 id="toc">TOC</h2>
<pre class="hljs"><code><div>0. Introduction
	0.0 Welcome
	0.1 How to use the exercise files
1. First Steps
	1.0 Course overview
	1.1 Prepare for development
	1.2 Explore WordPress plugins
2. Plugin Basics
	2.0 Get started
	2.1 Explore WordPress APIs
	2.2 Action and filter hooks
	2.3 Plugin activation and deactivation
	2.4 Pluggable WordPress functions
	2.5 Develop secure WordPress plugins
	2.6 Best practices for plugin development
3. Building a WordPress Plugin
	3.0 Create the plugin directory and files
	3.1 Add administration menus
	3.2 Add the plugin settings page
	3.3 Add settings callback functions
	3.4 Validate plugin settings
	3.5 Add custom functionality
	3.6 Include JavaScript and CSS
	3.7 Plugin internationalization
	3.8 Add an uninstall feature
	3.9 Test and debug
4. Essential Plugin Techniques
	4.0 Customize the WordPress loop
	4.1 Create widgets
	4.2 Manage users and roles
	4.3 Work with JavaScript and CSS
	4.4 Use the Options API
5. Extending Plugin Functionality
	5.0 Add custom post types and taxonomies
	5.1 Work with custom fields
	5.2 Add meta boxes
	5.3 Work with custom database queries
	5.4 Integrate admin notices
6. Advanced Plugin Techniques
	6.0 Use the Transients API
	6.1 Use the HTTP API
	6.2 Use WP-Cron
	6.3 Implement Ajax
	6.4 Use the REST API
	6.5 Develop with Gutenberg
7. Conclusion
	7.0 Next steps
</div></code></pre>
<h2 id="end-02---toc">--- [END 02 - TOC]</h2>
<h2 id="videos">VIDEOS</h2>
<h3 id="0-introduction">0. Introduction</h3>
<h4 id="00-welcome">0.0 Welcome</h4>
<ul>
<li>
<p>How build wp plugins w WP API</p>
</li>
<li>
<p>Choosing good dev env</p>
</li>
<li>
<p>Secure WP plugins</p>
</li>
<li>
<p>Best Practices</p>
</li>
<li>
<p>Create complete wp plugin</p>
<h4 id="01-how-to-use-the-exercise-files">0.1 How to use the exercise files</h4>
</li>
<li>
<p>Exercise file plugin demos are &quot;KEY to mastering the material&quot;</p>
</li>
<li>
<p>Using default, self-hosted wp install</p>
</li>
<li>
<p>https://wordpress.org/download</p>
</li>
<li>
<p>MAMP</p>
</li>
<li>
<p>Google Chrome</p>
</li>
<li>
<p>Firefox</p>
</li>
<li>
<p>Atom text editor Atom.io</p>
</li>
<li>
<p>All plugin demos and code snippets are open source</p>
</li>
<li>
<p>Plugins at https://wordpress.org/plugins</p>
</li>
</ul>
<h3 id="1-first-steps">1. First Steps</h3>
<h4 id="10-course-overview">1.0 Course overview</h4>
<ul>
<li>https://wordpress.org</li>
<li>WP is free open source content management system based on PHP and MySQL</li>
<li>When WordPress core files are installed on a web server with a database they work together to create a powerful, flexible website</li>
<li>WP powered sites enable users to create, publish, and share content with ease</li>
</ul>
<p><strong>What are plugins?</strong></p>
<ul>
<li>Plugins: packages of code that extend WP functionality; work together with</li>
<li>WP Core Files</li>
<li>WP plugins</li>
<li>WP themes</li>
<li>Consist of javascript, PHP files, images, etc</li>
</ul>
<p>Things plugins can do:</p>
<ul>
<li>Improve security</li>
<li>Improve SEO functionality</li>
<li>Improve performance with caching</li>
<li>Integrate third-party services</li>
<li>Customize the WordPress admin area</li>
</ul>
<p>Recommend Skills:</p>
<ul>
<li>good understanidng of PHP</li>
<li>Basic understanding of HTML, CSS, and JavaScript</li>
<li>Familiar with WordPress</li>
</ul>
<p>Video Resources:</p>
<ul>
<li>WordPress training and tutorials</li>
<li>PHP training and tutorials</li>
<li>JavaScript training and tutorials</li>
<li>HTML training and tutorials</li>
</ul>
<p>Preview of the Course:</p>
<ul>
<li>Getting started: Overview and setup</li>
<li>Plugin basics: Fundamentals, security, and best practices</li>
<li>Building a plugin: Build a complete plugin, <em><strong>start to finish</strong></em></li>
<li>Techniques: Add custom funcionality to your plugins</li>
</ul>
<p>WordPress Documentation:</p>
<ul>
<li>WordPress Codex: https://codex.wordpress.org/</li>
<li>WP Code Reference: https://developer.wordpress.org/reference/</li>
<li>WP Coding Standards: https://codex.wordpress.org/WordPress_Coding_Standards</li>
<li>Plugin Handbook: https://developer.wordpress.org/plugins</li>
</ul>
<p>&quot;Staying close the the official WordPress documentation is essential to building</p>
<h4 id="11-prepare-for-development">1.1 Prepare for development</h4>
<p>Popular Local Server apps:</p>
<ul>
<li>MAMP</li>
<li>MAMP PRO</li>
<li>LAMP</li>
<li>XAMPP</li>
<li>WAMP</li>
<li>AMPPS</li>
<li>BITNAMI</li>
<li>UwAmp server</li>
<li>WampServer</li>
<li>WebMatrix</li>
</ul>
<p>Virtual Machines: Give you even more control over your development environment.</p>
<ul>
<li>Vagrant</li>
<li>Docker</li>
<li>VMWare</li>
<li>VirtualBox</li>
<li>Parallels</li>
</ul>
<p>Version Control: helps keep plugins organized</p>
<ul>
<li>Git</li>
<li>CVS</li>
<li>SVN (Subversion)</li>
<li>Mercurial</li>
<li>Helix</li>
<li>Vesta</li>
<li>Microsoft Team Foundation Server</li>
</ul>
<p>Development Tools:</p>
<ul>
<li>Ansible</li>
<li>NetBeans IDEBullet point</li>
<li>PHPStorm</li>
<li>Sublime Text</li>
<li>Eclipse PDT</li>
<li>Zend Studio</li>
<li>Trello</li>
<li>Asana</li>
<li>Basecamp</li>
<li>Xdebug</li>
</ul>
<p>MAMP Server</p>
<ul>
<li>Free software</li>
<li>Mac and Windows</li>
<li>Apache, PHP, and MySQL</li>
<li>Available at: https://mamp.info/</li>
</ul>
<p>WordPress Variations</p>
<ul>
<li>Current WordPress version</li>
<li>Nightly development version</li>
<li>WordPress Multisite</li>
<li>Older version(s) of WordPress</li>
<li>WordPress set up for other languages</li>
</ul>
<p>We will work with latest stable WordPress version</p>
<p>WP Development Plugins</p>
<ul>
<li>Developer: https://wordpress.org/plugins/developer/</li>
<li>WP-Dev-Tools: https://wordpress.org/plugins/wp-developer-tools/</li>
<li>Query Monitor: https://wordpress.org/plugins/query-monitor/</li>
<li>Debug Bar: https://wordpress.org/plugins/debug-bar/</li>
<li>More Tools: https://m0n.co/wp-dev-tools/</li>
</ul>
<p>Enable debug mode on dev site</p>
<p>EX: 01-02 &gt; code-debug-log.txt</p>
<p>Set WP_DEBUG to true in wp-config.php</p>
<pre class="hljs"><code><div>define(<span class="hljs-string">'WP_DEBUG'</span>, <span class="hljs-keyword">true</span>);
</div></code></pre>
<p>WP_DEBUG: Display or Log File</p>
<p>Some people prefer to view debug info directly on the webpages, others prefer to view it in a debug log file. Both are fine.</p>
<ul>
<li>Display debug info directly on HTML pages:</li>
</ul>
<pre class="hljs"><code><div>define (<span class="hljs-string">'WP_DEBUG_DISPLAY'</span>, <span class="hljs-keyword">true</span>);
</div></code></pre>
<ul>
<li>Log debug info in a log file</li>
</ul>
<pre class="hljs"><code><div>define(<span class="hljs-string">'WP_DEBUG_LOG'</span>, <span class="hljs-keyword">true</span>)
</div></code></pre>
<p>#GOTCHA: You will have to create your own debug file</p>
<ul>
<li>Log file located at
/wp-content/debug.log</li>
</ul>
<p>More info about debug mode at: https://goo.gl/Q2HWXj</p>
<p>You can also monitor the server log file for errors outside the scope of WordPress</p>
<h4 id="12-explore-wordpress-plugins">1.2 Explore WordPress plugins</h4>
<p>Why do we build WP plugins?</p>
<p>#1 Rule: Don't modify WP core</p>
<ul>
<li>Updates overwrite changes</li>
<li>Changes can break things</li>
<li>Use plugins instead</li>
</ul>
<p>WordPress Plugin Directory</p>
<p>Understanding what has already been done can help us make decisions regarding our own plugins and help us brainstorm new ideas. Me may find one that does exactly what we need, or we may be able to adopt and continue dev on our own or with a team.</p>
<ul>
<li>
<p>https://developer.wordpress.org/plugins/wordpress-org/take-over-an-existing-plugin/</p>
</li>
<li>
<p>WPS Hide Login: Changes default location of WP login page</p>
</li>
<li>
<p>Disable Emojis</p>
</li>
<li>
<p>Disable Feeds: Useful when WP used as strict CMS and not a blogging platform</p>
</li>
<li>
<p>All in One SEO Pack</p>
</li>
<li>
<p>W3 Total Cache: helps site performance</p>
</li>
<li>
<p>Dashboard Widgets Suite: Jeff's plugin - useful widgets for WP dashboard</p>
</li>
</ul>
<p>#GOTCHA: Plugins come and go, so if any of these are missing &quot;don't sweat it&quot;</p>
<p>&quot;Knowing what's already been done [with plugins] can save you time and help focus your efforts on lucrative projects.&quot;</p>
<ul>
<li>WP Statistics:</li>
<li>Social Share Buttons:</li>
<li>User Submitted Posts: submit content from site front end</li>
</ul>
<p>Shopping Cart and Membershipt plugins: Transform your site into full-function e-commerce system</p>
<ul>
<li>
<p>Easy Digital Downloads</p>
</li>
<li>
<p>Book Calendar</p>
</li>
<li>
<p>WPL Real Estate</p>
</li>
</ul>
<p>PREMIUM / PRO PLUGINS:</p>
<ul>
<li>Code Canyon</li>
<li>WPMuDev.org</li>
<li>Plugin Planet</li>
</ul>
<p>All plugins hosted at WP Plugin Directory are open source, so you are free to explore and reuse the code according to the GPL license.</p>
<p>#GOTCHA: Make sure to confirm the license terms before reusing any plugin code.</p>
<h3 id="2-plugin-basics">2. Plugin Basics</h3>
<h4 id="20-get-started">2.0 Get started</h4>
<p>A great way to break into plugin development is to build a simple plugin.</p>
<p>Hello Dolly plugin is very simple, but most plugins have multiple files organized into a parent directory and subdirs.</p>
<p>Navigate to Plugins directory</p>
<p>Create a Simple Single-File Plugin</p>
<ul>
<li>File &gt; Save As &gt; simple-example-plugin.php</li>
</ul>
<p>#BESTPRACTICE</p>
<p>Because this plugin will only be one file it is fine to put it directly in the plugins/ directory. But, just to be safe in case we want to add more files later, it is best practice to put the plugin file in a folder with the exact same name (minus the extension).</p>
<p>plugins/simple-example-plugin/simple-example-plugin.php</p>
<p>Every plugin must include a proper file header</p>
<p>EX: 02-01 &gt; code-file-header.txt</p>
<pre class="hljs"><code><div><span class="hljs-meta">&lt;?php</span>
<span class="hljs-comment">/*
Plugin Name:  Simple Example Plugin
Description:  Welcome to WordPress plugin development
Plugin URI:   https://plugin-planet.com/
Author:       Jeff Starr
Version:      1.0
License:      GPLv2 or later
License URI:  https://www.gnu.org/licenses/gpl-2.0.txt
*/</span>

</div></code></pre>
<p>The file header contains metadata about the plugin like plugin name, description, author, etc.</p>
<p>Minimally, the file header must include the name of the plugin</p>
<p>If ever in doubt, just look at the Akismet or Hello Dolly plugin headers for reference</p>
<p>Plugin License</p>
<p>Let's keep the license open source just like WordPress itself</p>
<ul>
<li>https://opensource.org/licenses/category</li>
</ul>
<p>Including a proper license lets user know its OK to use your code. Most WP plugins licensed under GPLv2 or later</p>
<p>GPL ensures that WordPress and all its plugins and themes will remain open source for everyone. So it won't get locked down by legal complications and proprietary restrictions.</p>
<p>Add a copying permissions statement to the file header</p>
<p>Grab example from exercise files</p>
<p>EX: 02-01 &gt; gpl-copying-permission-statement.txt</p>
<p>Add to bottom of file header</p>
<p>Additonally, we should include a copy of the GNU license itself (from ex files)</p>
<p>EX: 02-01 &gt; simple-example-plugin &gt; license.txt</p>
<p>Place license in simple-example-plugin/ folder</p>
<p>Plugin is now installed and ready to activate</p>
<p>Doesn't do anything yet, but gives us a starting point to see our plugin on the plugins page</p>
<p>Now activate our new plugin</p>
<p>There are 2 possible locations to install plugins in:</p>
<p>#GOTCHA: You'll have to manually create this folder in the wp-content folder.</p>
<p>We can install in the plugins/ directory, or the wp-content/mu-plugins/ directory</p>
<ul>
<li>mu-plugins: must use; activated automatically</li>
</ul>
<p>Must Use Plugins:</p>
<p>Pros:</p>
<ul>
<li>No need to login to admin area</li>
<li>Loaded before all other plugins</li>
</ul>
<p>Cons:</p>
<ul>
<li>No automatic or one-click updates</li>
<li>No update notifications</li>
<li>Activation hooks don't work; no activation/deactivation hooks</li>
<li>No plugin directories -- single PHP files only</li>
</ul>
<p>To see how must use plugins work, we will move our plugin to the mu-plugins directory</p>
<p>Deactive plugin first
move only main plugin file to mu-plugins/ dir</p>
<p>&quot;Must-Use&quot; tab appears under the Plugins page header</p>
<p>These plugins are executed automatically on each page load</p>
<p>Plugin Naming Guidelines:</p>
<ul>
<li>Plugin name should match the main plugin file</li>
</ul>
<p>EG: My Simple Plugin = my-simple-plugin.php</p>
<ul>
<li>Plugin name should match the main plugin folder</li>
</ul>
<p>EG: My Simple Plugin = /my-simple-plugin/</p>
<ul>
<li>
<p>Do som research on potential names: Helps to avoid conflicts with existing plugins</p>
<h4 id="21-explore-wordpress-apis">2.1 Explore WordPress APIs</h4>
</li>
</ul>
<p>From this point forward, all code we use to build our WP plugin should utilize the <strong>WordPress API</strong></p>
<p>API: Application programming interface</p>
<ul>
<li>https://codex.wordpress.org/WordPress_APIs</li>
</ul>
<p>The WP API is comprised of &quot;numerous individual APIs, each of which focuses on a specific type of functionality&quot;</p>
<ul>
<li>Options API: Store options in WP Database</li>
</ul>
<p>Understanding which APIs are available helps us to choose the &quot;right tool for the job&quot; when building WP plugins</p>
<p>#GOTCHA: These are all collectively referred to as &quot;the WordPress API&quot;</p>
<p>Most Commonly Used APIs:</p>
<ul>
<li>
<p>Dashboard Widgets API</p>
</li>
<li>
<p>Database API</p>
</li>
<li>
<p>HTTP API</p>
</li>
<li>
<p>REST API</p>
</li>
<li>
<p>File Header API</p>
</li>
<li>
<p>Filesystem API</p>
</li>
<li>
<p>Metadata API</p>
</li>
<li>
<p>Options API</p>
</li>
<li>
<p>Plugin API</p>
</li>
<li>
<p>Quicktags API</p>
</li>
<li>
<p>Rewrite API</p>
</li>
<li>
<p>Settings API</p>
</li>
<li>
<p>Shortcode API</p>
</li>
<li>
<p>Transients API</p>
</li>
<li>
<p>Widgets API</p>
</li>
<li>
<p>XML-RPC API</p>
</li>
</ul>
<p>In addition to APIs, WordPress provides functions, classes, and template tags that you can use when building your plugins</p>
<p>https://developer.wordpress.org/reference/functions</p>
<p>Understand which classes and functions are available is essential to build safe, secure, standards-based plugins</p>
<p>Plugin Development: Key Resources</p>
<p>For learning more about specific WP functionality. These should first stop.</p>
<ul>
<li>WP Codex: https://codex.wordpress.org</li>
<li>WP Code Reference: https://developer.wordpress.org/reference/</li>
<li>Plugin Handbook: https://developer.wordpress.org/plugins/</li>
</ul>
<p>When developing WP plugins using existing functionality whenever possible helps keep your plugins close to core, which helps them to be as fast and secure as possible with minimal input on my part.</p>
<p>Reasons to Use the WP API:</p>
<ul>
<li>
<p>Makes development easier</p>
</li>
<li>
<p>Saves time -- no need to &quot;reinvent the wheel&quot;</p>
</li>
<li>
<p>Does the heavy lifting for many tasks (interacting w/ database, sanitizing variables, etc.)</p>
</li>
<li>
<p>Ensures your plugin is backward compatible and future proof</p>
</li>
<li>
<p>Offers seamless integration with the WordPress admin area</p>
<h4 id="22-action-and-filter-hooks">2.2 Action and filter hooks</h4>
</li>
</ul>
<p>Hooks are central to WP plugin development. They enable us to interact with WP core, modify, extend, remove core funtionality.</p>
<p>Plugin_API is all about hooks</p>
<p>Two types of hooks: actions and filters</p>
<ul>
<li>
<p>Action hooks: run custom code at specific points during execution of WP (echo output, write to file, modify DB)</p>
</li>
<li>
<p>Filter hooks: modify data during WP execution (modify post content before sending to user)</p>
</li>
</ul>
<p>To use either actions or filters, we need a <strong>callback function</strong></p>
<p>Let's open the simple-example-plugin from the previous video</p>
<p>EX: 02-03 &gt; simple-example-plugin &gt; simple-example-plugin.php</p>
<p>Add easy callback function for an action hook to send an email</p>
<p>wp_mail() is a WordPress core function - it sends an email</p>
<p>In main plugin file <strong>simple-example-plugin.php</strong>:</p>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">myplugin_action_hook_example</span><span class="hljs-params">()</span> </span>{

  wp_mail( <span class="hljs-string">'email@example.com'</span>, <span class="hljs-string">'Subject'</span>, Message ...<span class="hljs-string">' );

}
add_action( '</span>init<span class="hljs-string">', '</span>myplugin_action_hook_example<span class="hljs-string">' );

</span></div></code></pre>
<p>add_action(): first param specifies the hook, second the callback function name</p>
<p>Email will be sent every time WP executes</p>
<p>What order are Action Hooks executed?</p>
<ul>
<li>https://codex.wordpress.org/Plugin_API/Action_Reference</li>
</ul>
<p>init hook happens very early in the process</p>
<p>we can include our callback function at just about any point (hook)</p>
<p>Filter Hooks:</p>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">myplugin_filter_hook_example</span><span class="hljs-params">( $content )</span> </span>{

  $content = $content . <span class="hljs-string">'&lt;p&gt;Custom content..&lt;/p&gt;'</span>;
  
  <span class="hljs-keyword">return</span> $content;

}
</div></code></pre>
<p>Register the filter function like this:</p>
<p>add_filter( 'the_content' , 'myplugin_filter_hook_example' );</p>
<p>WordPress provides many filter hooks</p>
<p>https://codex.wordpress.org/Plugin_API/Filter_Reference</p>
<p>Adding custom hooks is smart. Enables other devs to be able to extend and customize our plugins</p>
<p>Also possible to add or remove action and filter hooks whenever necessary</p>
<p>WP Hook Resources:</p>
<ul>
<li>
<p>Course: <strong>Advanced WordPress: Action and Filter Hooks</strong></p>
<h4 id="23-plugin-activation-and-deactivation">2.3 Plugin activation and deactivation</h4>
</li>
</ul>
<p>WP Registration Hooks:</p>
<p>Three hooks that enable us to customize functionality when the plugin is activated, deactivated, or uninstalled</p>
<ul>
<li>register_activation_hook() - runs when plugin is activated</li>
<li>register_deactivation_hook() - runs when plugin is deactivated</li>
<li>register_uninstall_hook() - runs when plugin is uninstalled</li>
</ul>
<p>register_activation_hook()</p>
<p>https://goo.gl/gc6brN
https://developer.wordpress.org/reference/functions/register_activation_hook/</p>
<ul>
<li>
<p>Runs when plugin is activated from plugins page in admin area</p>
</li>
<li>
<p>Useful for: adding default options, creating db tables, checking config, etc.</p>
</li>
</ul>
<p>EX: 02-04 &gt; activate-deactivate</p>
<p>Let's create a function that adds options to the options table</p>
<p>The first function is registered with the activation hook:</p>
<pre class="hljs"><code><div><span class="hljs-comment">// do stuff on activation</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">myplugin_on_activation</span><span class="hljs-params">()</span> </span>{

  <span class="hljs-keyword">if</span> ( ! current_user_can( <span class="hljs-string">'activate_plugins'</span> ) ) <span class="hljs-keyword">return</span>;
  
  add_option( <span class="hljs-string">'myplugin_posts_per_page'</span>, <span class="hljs-number">10</span> );
  add_option( <span class="hljs-string">'myplugin_show_welcome_page'</span>, <span class="hljs-keyword">true</span>);

}
register_activation_hook( <span class="hljs-keyword">__FILE__</span>, <span class="hljs-string">'myplugin_on_activation'</span> );

</div></code></pre>
<p><strong>FILE</strong>: path to current file</p>
<p>2nd parameter is name of callback function</p>
<p>Inside function, we first check if user has sufficient priviledges. If not return without doing anything</p>
<p>Otherwise, we add 2 options: posts per page and whether to display a welcome page</p>
<hr>
<p>Visit admin area and activate the plugin. Check options table in phpMyAdmin to verify that the options were added</p>
<p>Do a quick search in option_name field for the new options</p>
<p>#GOTCHA: Activation hook is great, but there are details / caveats to be aware of</p>
<p>EX: 02-04 &gt; notes-activation-hook.txt</p>
<h1 id="notes-for-registeractivationhook">====================================
Notes for register_activation_hook()</h1>
<ul>
<li>
<p>register_activation_hook() must be called from within the main plugin file.</p>
</li>
<li>
<p>register_activation_hook() must not be registered from within another hook (e.g., &quot;plugins_loaded&quot; or &quot;init&quot;), because such hooks are called before the plugin is activated.</p>
</li>
<li>
<p>If the activation callback function is located in any file other than the main plugin file, you can include the file before registering with the activation hook, for example:</p>
<p>include_once dirname( <strong>FILE</strong> ) . '/includes/activation.php';
register_activation_hook( <strong>FILE</strong>, 'myplugin_activation_function' );</p>
</li>
<li>
<p>If building a plugin for WP Multisite, it is better to use the &quot;admin_init&quot; hook. More info:</p>
<p>https://core.trac.wordpress.org/ticket/14170#comment:68)</p>
</li>
<li>
<p>Never echo/print anything for any of these three hooks:</p>
<p>register_activation_hook()
register_deactivation_hook()
register_uninstall_hook()</p>
</li>
<li>
<p>Learn more about register_activation_hook():</p>
<p>https://codex.wordpress.org/Function_Reference/register_activation_hook
https://developer.wordpress.org/reference/functions/register_activation_hook/</p>
</li>
</ul>
<hr>
<p>Deactivation Hook:</p>
<ul>
<li>Remove temp data, clear rewrite rules, delete transients, etc</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-comment">// do stuff on deactivation</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">myplugin_on_deactivation</span><span class="hljs-params">()</span> </span>{
  
  <span class="hljs-keyword">if</span> ( ! current_user_can( <span class="hljs-string">'activate_plugins'</span> ) ) <span class="hljs-keyword">return</span>;
  
  flush_rewrite_rules();
  
}
register_deactivation_hook( <span class="hljs-keyword">__FILE__</span>, <span class="hljs-string">'myplugin_on_deactivation'</span> );
</div></code></pre>
<p>flush_rewrite_rules(): useful for custom post types, etc.</p>
<p>It doesn't do anything visible, so how can we verify it is working?</p>
<p>A: Send email or simply &quot;die&quot; with a message</p>
<pre class="hljs"><code><div>  wp_die( <span class="hljs-string">'The plugin has been deactivated!'</span> );
</div></code></pre>
<p>#GOTCHA: Remember to REMOVE the die function when done testing!</p>
<p>Uninstall Hook:</p>
<p>Runs when plugin is uninstalled / removed via plugins page in admin area</p>
<p>Useful for: removing plugin data from database when plugin is deleted</p>
<p>Use to have plugin <strong>clean up</strong> after itself</p>
<pre class="hljs"><code><div><span class="hljs-comment">// do stuff on uninstall</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">myplugin_on_uninstall</span><span class="hljs-params">()</span> </span>{
  
  <span class="hljs-keyword">if</span> ( ! current_user_can( <span class="hljs-string">'activate_plugins'</span> ) ) <span class="hljs-keyword">return</span>;
  
  delete_option( <span class="hljs-string">'myplugin_posts_per_page'</span>, <span class="hljs-number">10</span> );
  delete_option( <span class="hljs-string">'myplugin_show_welcome_page'</span>, <span class="hljs-keyword">true</span> );
  
}
register_uninstall_hook( <span class="hljs-keyword">__FILE__</span>, <span class="hljs-string">'myplugin_on_uninstall'</span> );
</div></code></pre>
<p>Deactivate before uninstalling</p>
<p>Check phpMyAdmin to verify options have been removed (should return zero results)</p>
<p>#BESTPRACTICE: There is a better method for cleaning up after plugins that will be covered later in the course</p>
<p>&quot;These hooks give us granular control and enable us to ensure that plugins are set up correctly and that they clean up after themselves when they are removed.&quot;</p>
<h4 id="24-pluggable-wordpress-functions">2.4 Pluggable WordPress functions</h4>
<p>https://codex.wordpress.org/Pluggable_Functions</p>
<p>Another way to customize WP</p>
<p>Pluggable Functions: functions that can be overridden by our own versions; redefinable functions</p>
<p>CTRL  + G =&gt; go to specific line number</p>
<p>pluggable.php &gt; Line 558</p>
<p>Default pluggable function for wp_logout():</p>
<pre class="hljs"><code><div><span class="hljs-keyword">if</span> ( !function_exists(<span class="hljs-string">'wp_logout'</span>) ) :
<span class="hljs-comment">/**
 * Log the current user out.
 *
 * <span class="hljs-doctag">@since</span> 2.5.0
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">wp_logout</span><span class="hljs-params">()</span> </span>{
  
  wp_destroy_current_session();
  wp_clear_auth_cookie();
  
  <span class="hljs-comment">/**
   * Fires after a user is logged-out.
   *
   * <span class="hljs-doctag">@since</span> 1.5.0
   */</span>
  do_action( <span class="hljs-string">'wp_logout'</span> );
  
}
<span class="hljs-keyword">endif</span>;
</div></code></pre>
<p>The default behavior:</p>
<ul>
<li>destroys session</li>
<li>clears autho cookies</li>
<li>fires wp_logout hook</li>
</ul>
<p>To customize:</p>
<ul>
<li>
<p>register new function with wp_logout hook</p>
</li>
<li>
<p>register callback function with wp logout hook</p>
</li>
<li>
<p>Add custom functionality with a callback function</p>
</li>
</ul>
<p>EX: 02-05 &gt; pluggable-functions.php</p>
<pre class="hljs"><code><div><span class="hljs-comment">/*
Plugin Name:  Pluggable Functions
Description:  Basic example demonstrating pluggable functions.
Plugin URI:   https://plugin-planet.com/
Author:       Jeff Starr
Version:      1.0
*/</span>

<span class="hljs-comment">// customize logout function</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">myplugin_custom_logout</span><span class="hljs-params">()</span> </span>{
  
  <span class="hljs-comment">// do something when the user logs out..</span>
  
}
add_action( <span class="hljs-string">'wp_logout'</span>, <span class="hljs-string">'myplugin_custom_logout'</span> );
</div></code></pre>
<ul>
<li>for most cases, using a hook is the best way to add custom functionality</li>
<li>If we need more control, we can override the wp_logout() function:</li>
</ul>
<p>Copy the function without the function_exists() if statement:</p>
<p>Paste function ito our main plugin file. Now we can customize the function in our new version</p>
<p>Add our custom logout function into our version of wp_logout() afte the auth cookie clearing code:</p>
<pre class="hljs"><code><div>...
wp_clear_auth_cookie();
myplugin_custom_logout();
</div></code></pre>
<p>Since we are now calling our wp_logout() function directly, we don't need to register it with the wp_logout hook</p>
<p>So we can remove the add_action() line:</p>
<pre class="hljs"><code><div>add_action( <span class="hljs-string">'wp_logout'</span>, <span class="hljs-string">'myplugin_custom_logout'</span> );
</div></code></pre>
<p>This way the function will be called ONLY ONCE: when it is called from our custom logout function</p>
<p>In general, <strong>pluggable functions</strong> enable greater customization than using hooks alone</p>
<p>So, we could replace the standard function calls with our custom function calls like so:</p>
<pre class="hljs"><code><div>myplugin_destroy_current_session(); <span class="hljs-comment">// instead of wp_destroy_current_session()</span>
myplugin_clear_auth_cookie(); <span class="hljs-comment">// instead of wp_clear_auth_cookie()</span>
</div></code></pre>
<p>#NOTE: &quot;All pluggable functions are wrapped with a function_exists() condition. These lines instruct PHP to use the function only if it NOT already included&quot;</p>
<p>#GOTCHA: Don't include the function_exists() code when redefining functions</p>
<h4 id="25-develop-secure-wordpress-plugins">2.5 Develop secure WordPress plugins</h4>
<p>Important to ensure plugins are as secure as possible</p>
<p>&quot;When developing plugins there is no 'magic pill' to ensure that everything is secure&quot;</p>
<p>Security is <strong>mission critical</strong></p>
<p>https://codex.wordpress.org/Data_Validation</p>
<p>Security is added as you build your plugins with each variable sanitized, each user validated</p>
<p>WP Security Techniques:</p>
<ul>
<li>Data validation</li>
<li>Sanitizing input</li>
<li>Sanitizing output</li>
<li>Using nonces</li>
<li>Checking users</li>
</ul>
<p>Documentation: https://developer.wordpress.org/plugins/security/</p>
<hr>
<p>Data Validation:</p>
<ul>
<li>The process of checking whether data is valid or invalid</li>
</ul>
<p>Documentation: https://developer.wordpress.org/plugins/security/data-validation/</p>
<p>Usually the data is provided by user or web server</p>
<p>Examples of Data Validation:</p>
<ul>
<li>Check if submitted comment is not blank</li>
<li>Check if an email address is formatted correctly</li>
<li>Check if a credit card number only contains numbers</li>
<li>Check if the number of items is greater than zero</li>
<li>Check if an address exists in a database</li>
</ul>
<p>Validating data should be done as early as possible, before the data is used for anything</p>
<p>Three ways to validate with WP</p>
<p>WP Validation Functions:</p>
<ul>
<li>is_email() - checks if email is valid</li>
<li>term_exists() - checks if the term exists</li>
<li>username_exists() - checks if the username exists</li>
<li>More validation functions: https://codex.wordpress.org/Data_Validation</li>
</ul>
<p>PHP Validation Functions:</p>
<ul>
<li>isset()</li>
<li>empty()</li>
<li>mb_strlen()</li>
<li>strlen()</li>
<li>preg_match()</li>
<li>strpos()</li>
<li>count()</li>
<li>in_array()</li>
</ul>
<p>Documentation: https://secure.php.net/docs.php</p>
<p>Custom Validation Functions:</p>
<ul>
<li>Write your own (if no suitable functions can be found)</li>
<li>Validate any data however is required</li>
<li>Use any existing WP and PHP functions</li>
</ul>
<p>Good validation functions return boolean values (true/false)</p>
<p>EX: 02-06 &gt; security-example-validation.php</p>
<ul>
<li>Return false if value is empty</li>
<li>Return false if not formatted as a phone number</li>
<li>Else return true</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-comment">// validate phone number</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">myplugin_is_phone_number</span><span class="hljs-params">( $phone_number )</span> </span>{

	<span class="hljs-comment">// check if empty</span>
	<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">empty</span>( $phone_number ) ) <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;

	<span class="hljs-comment">// check format</span>
	<span class="hljs-keyword">if</span> ( ! preg_match( <span class="hljs-string">"/^\(?([0-9]{3})\)?([ .-]?)([0-9]{3})([ .-]?)([0-9]{4})$/"</span>, $phone_number ) ) <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;

	<span class="hljs-comment">// all good!</span>
	<span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
</div></code></pre>
<p>And this is an example HTML form in which the plugin could be used (also on the same page)</p>
<pre class="hljs"><code><div><span class="hljs-tag">&lt;<span class="hljs-name">form</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"phone"</span>&gt;</span>Please enter your phone number:<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"phone"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"tel"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"myplugin-phone-number"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"Submit Form"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
</div></code></pre>
<p>Next, we need a function to process or &quot;handle&quot; the form when it is submitted by a user</p>
<pre class="hljs"><code><div><span class="hljs-comment">// process submitted form</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">myplugin_process_phone_number</span><span class="hljs-params">()</span> </span>{
  
  <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">isset</span>( $_POST[ <span class="hljs-string">'myplugin-phone-number'</span> ] ) ) { 
  
    $phone_number = $_POST[ <span class="hljs-string">'myplugin-phone-number'</span> ];
    
    <span class="hljs-keyword">if</span> ( myplugin_is_phone_number( $phone_number ) ) {
      
      <span class="hljs-keyword">echo</span> <span class="hljs-string">'&lt;p&gt;Thank you for your phone number!&lt;/p&gt;'</span>;
      
    } <span class="hljs-keyword">else</span> {
      
      <span class="hljs-keyword">echo</span> <span class="hljs-string">'&lt;p&gt;Please provide a valid phone number!&lt;/p&gt;'</span>;
      
    }
  
  }
  
}
</div></code></pre>
<hr>
<p>Data Sanitization:</p>
<ul>
<li>Process of cleaning or filtering data to make it safe</li>
</ul>
<p>Documentaton: https://developer.wordpress.org/plugins/security/</p>
<p>Making data &quot;safe&quot; depends upon the context in which it is used</p>
<p>Examples of Data Sanitization:</p>
<ul>
<li>Display data as HTML -&gt; Sanitize the data as HTML</li>
<li>Display data as an attribute -&gt; Sanitize data as an attribute</li>
<li>Display the data as a URL -&gt; Sanitize the data as a URL</li>
<li>Display the data as &quot;x&quot; -&gt; Sanitize the data as &quot;x&quot;</li>
</ul>
<p>WP Sanitization Functions:</p>
<ul>
<li>sanitize_email() - sanitizes data as an email address</li>
<li>sanitize_text_field() - sanitizes data for text fields</li>
<li>sanitize_user() - sanitizes data as a username</li>
</ul>
<p>More sanitization functions:
https://developer.wordpress.org/reference/functions</p>
<hr>
<p>PHP Sanitization Functions:</p>
<ul>
<li>filter_var() - sanitizes data using filters
https://secure.php.net/manual/en/function.filter-var.php</li>
</ul>
<p>PHP data sanitization</p>
<ul>
<li>https://secure.php.net/manual/en/filter.examples.sanitization.php</li>
</ul>
<p>PHP sanitize filters</p>
<ul>
<li>https://secure.php.net/manual/en/filter.filters.sanitize.php</li>
</ul>
<hr>
<p>Custom Sanitization Functions</p>
<ul>
<li>Write your own</li>
<li>Sanitize any data however is required</li>
<li>Use any existing WP and PHP functions</li>
</ul>
<p>EX: 02-06 &gt; security-example-sanitization.php</p>
<p>sanitize_text_field():</p>
<ul>
<li>Checks for invalid UTF-8</li>
<li>Converts single less-than characters (&lt;) to entity</li>
<li>Strips all tags</li>
<li>Removes line breaks, tabs, and extra white space</li>
</ul>
<p>https://developer.wordpress.org/reference/functions/sanitize_text_field</p>
<pre class="hljs"><code><div><span class="hljs-comment">// process submitted form</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">myplugin_process_favorite_movie</span><span class="hljs-params">()</span> </span>{
  
  <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">isset</span>( $_POST[<span class="hljs-string">'myplugin-favorite-movie'</span>] ) ) {
    
    $fav_movie = sanitize_text_field( $_POST[ <span class="hljs-string">'myplugin-favorite-movie'</span> ] );
    
    <span class="hljs-keyword">if</span> ( ! <span class="hljs-keyword">empty</span>( $fav_movie ) ) {
      
      <span class="hljs-keyword">echo</span> <span class="hljs-string">'&lt;p&gt;Your favorite movie is '</span>. $fav_movie . <span class="hljs-string">'.&lt;/p&gt;'</span>;
      
    } <span class="hljs-keyword">else</span> {
      
      <span class="hljs-keyword">echo</span> <span class="hljs-string">'&lt;p&gt;Please enter your favorite movie!&lt;/p&gt;'</span>;
      
    }
    
  }
   
}
</div></code></pre>
<p>#GOTCHA: It would be better in this case to validate as an actual movie. But, since movie titles can include letters, numbers, punctuantion and special characters, they would be difficult to validate. So, instead of validating we are <strong>sanitizing</strong></p>
<hr>
<p>Nonce Security:</p>
<ul>
<li>Generated strings used to verify request for security purposes</li>
</ul>
<p>Documentation:</p>
<ul>
<li>https://developer.wordpress.org/plugins/security/nonces/</li>
<li>https://codex.wordpress.org/WordPress_Nonces</li>
</ul>
<p>Enable us to verify origin and intent of any submitted form request</p>
<p>EX: 02-06 &gt; security-example-nonces.php</p>
<pre class="hljs"><code><div><span class="hljs-comment">// display form</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">myplugin_form_favorite_music</span><span class="hljs-params">()</span> </span>{
  
  <span class="hljs-meta">?&gt;</span>
  
  &lt;form method=<span class="hljs-string">"post"</span>&gt;
    &lt;p&gt;&lt;label <span class="hljs-keyword">for</span>=<span class="hljs-string">"music"</span>&gt;What is your favorite music&lt;/label&gt;&lt;/p&gt;
    &lt;p&gt;&lt;input id=<span class="hljs-string">"music"</span> type=<span class="hljs-string">"text"</span> name=<span class="hljs-string">"myplugin-favorite-music"</span>&gt;&lt;/p&gt;
    &lt;p&gt;&lt;input type=<span class="hljs-string">"submit"</span> value=<span class="hljs-string">"Submit Form"</span>&gt;&lt;/p&gt;
    
    <span class="hljs-meta">&lt;?php</span> wp_nonce_field( <span class="hljs-string">'myplugin_form_action'</span>, <span class="hljs-string">'myplugin_nonce_field'</span>, <span class="hljs-keyword">false</span>); <span class="hljs-meta">?&gt;</span>
    
  &lt;/form&gt;
  
  <span class="hljs-meta">&lt;?php</span>
  
}
</div></code></pre>
<p>wp_nonce_field():</p>
<ul>
<li>hidden field</li>
<li>inspect the source code to see the nonce field</li>
<li>the value is the nonce itself</li>
</ul>
<p>first arg: nonce action
2nd arg: nonce field</p>
<p>Be as specific as possible when naming these parameters</p>
<p>When form is submitted, we use this function to handle the request</p>
<pre class="hljs"><code><div><span class="hljs-comment">// process submitted form</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">myplugin_process_favorite_music</span><span class="hljs-params">()</span> </span>{

	<span class="hljs-comment">// get the nonce</span>
	<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">isset</span>( $_POST[<span class="hljs-string">'myplugin_nonce_field'</span>] ) ) {

		$nonce = $_POST[<span class="hljs-string">'myplugin_nonce_field'</span>];

	} <span class="hljs-keyword">else</span> {

		$nonce = <span class="hljs-keyword">false</span>;

	}

	<span class="hljs-comment">// process form</span>
	<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">isset</span>( $_POST[<span class="hljs-string">'myplugin-favorite-music'</span>] ) ) {

		<span class="hljs-comment">// verify nonce</span>
		<span class="hljs-keyword">if</span> ( ! wp_verify_nonce( $nonce, <span class="hljs-string">'myplugin_form_action'</span> ) ) {

			wp_die( <span class="hljs-string">'Incorrect nonce!'</span> );

		} <span class="hljs-keyword">else</span> {

			$fav_music = sanitize_text_field( $_POST[ <span class="hljs-string">'myplugin-favorite-music'</span> ] );

			<span class="hljs-keyword">if</span> ( ! <span class="hljs-keyword">empty</span>( $fav_music ) ) {

				<span class="hljs-keyword">echo</span> <span class="hljs-string">'&lt;p&gt;Your favorite music is '</span>. $fav_music .<span class="hljs-string">'.&lt;/p&gt;'</span>;

			} <span class="hljs-keyword">else</span> {

				<span class="hljs-keyword">echo</span> <span class="hljs-string">'&lt;p&gt;Please enter your favorite music!&lt;/p&gt;'</span>;

			}

		}

	}

}
</div></code></pre>
<p>If someone tries to submit the form from another location, the nonce will fail</p>
<h4 id="26-best-practices-for-plugin-development">2.6 Best practices for plugin development</h4>
<p>&quot;What puts plugin developers ahead of the competion? Their plugins are developed with the WordPress API and best practices&quot;</p>
<p>Following best practices ensures your plugin will be widely compatible</p>
<p>Best Practices:</p>
<ul>
<li>File organization</li>
<li>Plugin architecture</li>
<li>Avoid naming collisions</li>
<li>Choose a good name for your plugin</li>
<li>Write great documentation</li>
<li>More best practices</li>
<li>Plugin boilerplates</li>
</ul>
<p>File Organization:</p>
<p>Directory Structure:</p>
<ul>
<li>Separate admin assets from public assets</li>
<li>Put general PHP files in the  /includes/ folder</li>
<li>Add a proper file header to the main plugin file</li>
<li>Keep the root directory as uncluttered as possible</li>
</ul>
<p>plugin-root-directory/</p>
<ul>
<li>
<p>blank index file</p>
</li>
<li>
<p>main plugin file</p>
</li>
<li>
<p>uninstall file</p>
</li>
<li>
<p>license file</p>
</li>
<li>
<p>readme file</p>
</li>
<li>
<p>Add subdirectories as needed to house other files</p>
</li>
<li>
<p>most plugins hae includes, languages, admin, and public folders</p>
</li>
</ul>
<p>my-custom-plugin/</p>
<ul>
<li>index.php</li>
<li>my-custom-plugin.php</li>
<li>uninstall.php</li>
<li>license.txt</li>
<li>readme.txt</li>
</ul>
<p>admin/
css/
js/
public/
css/
js/</p>
<hr>
<p>Plugin Architecture:</p>
<p>When it comes to organizing plugins, there are no strict rules, only <strong>best practices</strong></p>
<p>How you organize your code will depend on the size, scope, and complexity of your plugin</p>
<p>Smaller plugins that focus on one specific task generally don't require an elaborate architecture</p>
<p>Larger plugins with lots of code WILL benefit from an <strong>object oriented</strong> approach with PHP classes, etc.</p>
<p>Architecture Patterns:</p>
<p>Many common architecture patterns can be grouped into one of 3 camps:</p>
<p>Single plugin file, containing functions:</p>
<ul>
<li>Example at GitHub: https://lnkd.in/github_GaryJones</li>
</ul>
<p>Single plugin file, containing a class (and maybe some functions)</p>
<ul>
<li>Example at GitHub: https://lnkd.in/github_norcross</li>
</ul>
<p>Main plugin file, then one or more class files</p>
<ul>
<li>Example at GitHub: https://lnkd.in/github_DevinVinson</li>
</ul>
<hr>
<p>Plugin Structure: Best Practices:</p>
<ul>
<li>Keep you code well-organized</li>
<li>Comment your code as needed</li>
<li>Separate CSS and JavaScript files</li>
<li>Use conditional loading of code and assets</li>
</ul>
<p>Example:</p>
<pre class="hljs"><code><div><span class="hljs-meta">&lt;?php</span> <span class="hljs-comment">// example: conditonal loading</span>

<span class="hljs-keyword">require_once</span>( dirname( <span class="hljs-keyword">__FILE__</span> ) . <span class="hljs-string">'/admin/do-stuff.php'</span> );
</div></code></pre>
<p>Save this file as wp-content/examples/example-cond.php</p>
<p>#GOTCHA: As is, this code will include the file in both the admin area AND on all <strong>public facing</strong> pages</p>
<p>We can improve performance by using the is_admin() conditional tag like so:</p>
<pre class="hljs"><code><div><span class="hljs-meta">&lt;?php</span> <span class="hljs-comment">// example: conditonal loading</span>

<span class="hljs-keyword">if</span> ( is_admin() ) {
  
  <span class="hljs-keyword">require_once</span>( dirname( <span class="hljs-keyword">__FILE__</span> ) . <span class="hljs-string">'/admin/do-stuff.php'</span> );  
  
}
</div></code></pre>
<p>We save resources by loading the admin file only in the admin area</p>
<p>WP Conditional Tags:</p>
<ul>
<li>is_singular() - single post or page</li>
<li>is_single() - single post</li>
<li>is_page() - single page</li>
<li>is_archive() - archive page</li>
</ul>
<p>Many more: https://codex.wordpress.org/Conditional_Tags</p>
<hr>
<p>Architecture Patterns: Resources:</p>
<p>Recommended reading for aspiring WP plugin developers</p>
<ul>
<li>
<p>Slash - Singletons, loaders, actions, screens, and handlers
https://lnkd.in/g3z5Y3A</p>
</li>
<li>
<p>Implementing the MVC Pattern in WordPress Plugins
https://lnkd.in/guuaSEx</p>
</li>
<li>
<p>WordPress Plugin: WP MVC
https://lnkd.in/gNgFfpH</p>
</li>
</ul>
<hr>
<p>Avoid Naming Collisions:</p>
<p>When 2 or more plugins are trying to use the same name for a variable function or class</p>
<ul>
<li>Prefix everything (namespacing)</li>
<li>Check for existing implementations</li>
<li>Use object-oriented programming (OOP)</li>
<li>Use WordPress APIs and core functions</li>
</ul>
<p>Namespacing: Before</p>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">activation_tasks</span><span class="hljs-params">()</span> </span>{
  ...
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">deactivation_tasks</span><span class="hljs-params">()</span> </span>{
  ...
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">uninstall_tasks</span><span class="hljs-params">()</span> </span>{
  ...
}
</div></code></pre>
<p>If another active plugin is using any of these plugin names a FATAL ERROR will results</p>
<p>Solution: use OOP and namespacing functions and global variables in your plugin</p>
<p>Namespacing: After</p>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">myplugin_activation_tasks</span><span class="hljs-params">()</span> </span>{
  ...
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">myplugin_deactivation_tasks</span><span class="hljs-params">()</span> </span>{
  ...
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">myplugin_uninstall_tasks</span><span class="hljs-params">()</span> </span>{
  ...
}
</div></code></pre>
<p>Public Namespace:</p>
<p>Very important to namespace anything in the public namespace</p>
<p>Add a unique prefix to anything in the public namespace</p>
<ul>
<li>Functions</li>
<li>Classes</li>
<li>Hooks</li>
<li>Gobal variables</li>
<li>Public variables</li>
<li>Database entries</li>
<li>Anything else that may clash with another plugin</li>
</ul>
<hr>
<p>Check for Existing Implementations:</p>
<p>The are some PHP existence checking functions.</p>
<ul>
<li>Variables - isset()</li>
<li>Functions - function_exists()</li>
<li>Classes - class_exists()</li>
<li>Constants - defined()</li>
</ul>
<p>Return true if entity exists, false if not</p>
<p>EX: 02-07 &gt; examples &gt; example-func.php</p>
<pre class="hljs"><code><div><span class="hljs-meta">&lt;?php</span> <span class="hljs-comment">// example: check if function exists</span>

<span class="hljs-keyword">if</span> ( ! function_exists( <span class="hljs-string">'myplugin_customize_something'</span> ) ) {

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">myplugin_customize_something</span><span class="hljs-params">()</span> </span>{
    
    <span class="hljs-comment">// do stuff ...</span>
    
  }
  
}
</div></code></pre>
<p>With function_exists(), PHP will check if any other function has the same name. If so, it will ignor our function</p>
<p>Use Object-Oriented Programming (OOP):</p>
<ul>
<li>Simplified the amount of checking in your code</li>
<li>Instead of checking for existing variables, constants, and so forth, we only need to check whether the class is already defined</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">&lt;?php</span> <span class="hljs-comment">// example: oop</span>

<span class="hljs-keyword">if</span> ( ! class_exists( <span class="hljs-string">'Example_Plugin'</span> ) ) {
  
  <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Example_Plugin</span> </span>{
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">init</span><span class="hljs-params">()</span> </span>{
      <span class="hljs-comment">// do stuff..</span>
    }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">register</span><span class="hljs-params">()</span> </span>{
      <span class="hljs-comment">// do stuff..</span>
    }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">modify</span><span class="hljs-params">()</span> </span>{
      <span class="hljs-comment">// do stuff..</span>
    }
    
  }
  
}
</div></code></pre>
<p>OOP enables us to keep our function names nice and simple</p>
<p>Choose a Good Name for Your Plugin</p>
<p>&quot;Choosing a good name takes time and is one of the most important decisions you'll make when creating plugins.&quot;</p>
<p>Naming Tips:</p>
<ul>
<li>Take your time and do some research</li>
<li>Choose a unique name and avoid copyright issues</li>
<li>Do not use vulgar or offensive names</li>
<li>Do not include trademarked names without permission</li>
<li>Avoid including &quot;WordPress&quot; and/or &quot;Plugin in the name</li>
</ul>
<p>The goal is to choose the best name possible and then stick with it for the life of the plugin</p>
<p>Write Great Documentation:</p>
<p>Make sure your plugin is well documented. Best way is to look at the example at WordPress.org</p>
<p>https://wordpress.org/plugins/files/2016/06/readme.txt</p>
<pre class="hljs"><code><div>=== Plugin Name ===
Contributors: (this should be a list of wordpress.org userid's)
Donate link: http://example.com/
Tags: comments, spam
Requires at least: 3.0.1
Tested up to: 3.4
Stable tag: 4.3
License: GPLv2 or later
License URI: http://www.gnu.org/licenses/gpl-2.0.html

Here is a short description of the plugin.  This should be no more than 150 characters.  No markup here.

== Description ==

This is the long description.  No limit, and you can use Markdown (as well as in the following sections).

For backwards compatibility, if this section is missing, the full length of the short description will be used, and
Markdown parsed.

A few notes about the sections above:

*   &quot;Contributors&quot; is a comma separated list of wordpress.org usernames
*   &quot;Tags&quot; is a comma separated list of tags that apply to the plugin
*   &quot;Requires at least&quot; is the lowest version that the plugin will work on
*   &quot;Tested up to&quot; is the highest version that you've *successfully used to test the plugin*. Note that it might work on
higher versions... this is just the highest one you've verified.
*   Stable tag should indicate the Subversion &quot;tag&quot; of the latest stable version, or &quot;trunk,&quot; if you use `/trunk/` for
stable.

    Note that the `readme.txt` of the stable tag is the one that is considered the defining one for the plugin, so
if the `/trunk/readme.txt` file says that the stable tag is `4.3`, then it is `/tags/4.3/readme.txt` that'll be used
for displaying information about the plugin.  In this situation, the only thing considered from the trunk `readme.txt`
is the stable tag pointer.  Thus, if you develop in trunk, you can update the trunk `readme.txt` to reflect changes in
your in-development version, without having that information incorrectly disclosed about the current stable version
that lacks those changes -- as long as the trunk's `readme.txt` points to the correct stable tag.

    If no stable tag is provided, it is assumed that trunk is stable, but you should specify &quot;trunk&quot; if that's where
you put the stable version, in order to eliminate any doubt.

== Installation ==

This section describes how to install the plugin and get it working.

e.g.

1. Upload the plugin files to the `/wp-content/plugins/plugin-name` directory, or install the plugin through the WordPress plugins screen directly.
1. Activate the plugin through the 'Plugins' screen in WordPress
1. Use the Settings-&gt;Plugin Name screen to configure the plugin
1. (Make your instructions match the desired user flow for activating and installing your plugin. Include any steps that might be needed for explanatory purposes)


== Frequently Asked Questions ==

= A question that someone might have =

An answer to that question.

= What about foo bar? =

Answer to foo bar dilemma.

== Screenshots ==

1. This screen shot description corresponds to screenshot-1.(png|jpg|jpeg|gif). Note that the screenshot is taken from
the /assets directory or the directory that contains the stable readme.txt (tags or trunk). Screenshots in the /assets 
directory take precedence. For example, `/assets/screenshot-1.png` would win over `/tags/4.3/screenshot-1.png` 
(or jpg, jpeg, gif).
2. This is the second screen shot

== Changelog ==

= 1.0 =
* A change since the previous version.
* Another change.

= 0.5 =
* List versions from most recent at top to oldest at bottom.

== Upgrade Notice ==

= 1.0 =
Upgrade notices describe the reason a user should upgrade.  No more than 300 characters.

= 0.5 =
This version fixes a security related bug.  Upgrade immediately.

== Arbitrary section ==

You may provide arbitrary sections, in the same format as the ones above.  This may be of use for extremely complicated
plugins where more information needs to be conveyed that doesn't fit into the categories of &quot;description&quot; or
&quot;installation.&quot;  Arbitrary sections will be shown below the built-in sections outlined above.

== A brief Markdown Example ==

Ordered list:

1. Some feature
1. Another feature
1. Something else about the plugin

Unordered list:

* something
* something else
* third thing

Here's a link to [WordPress](http://wordpress.org/ &quot;Your favorite software&quot;) and one to [Markdown's Syntax Documentation][markdown syntax].
Titles are optional, naturally.

[markdown syntax]: http://daringfireball.net/projects/markdown/syntax
            &quot;Markdown is what the parser uses to process much of the readme file&quot;

Markdown uses email style notation for blockquotes and I've been told:
&gt; Asterisks for *emphasis*. Double it up  for **strong**.

`&lt;?php code(); // goes in backticks ?&gt;`
</div></code></pre>
<p>Readme file is used to create the documentation for your plugin at the WordPress plugin directory</p>
<p>#BESTPRACTICE: A complete well-written readme file means you'll be spending less time on customer support</p>
<p>WordPress Readme File Validator:</p>
<p>https://wordpress.org/plugins/developers/readme-validator/</p>
<p>Always take a few moments to validate your plugins' readme file</p>
<p>More Best Practices:</p>
<p>Pro Tips:</p>
<ul>
<li>
<p>Listen to your users</p>
</li>
<li>
<p>Maintain consistent development</p>
</li>
<li>
<p>Keep a complete and descriptive changelog</p>
</li>
<li>
<p>Use semantic versioning: http://semver.org</p>
</li>
</ul>
<p>Plugin Boilerplates:</p>
<p>boilerplate: pre-built starting point that can help speed up development</p>
<p>WordPress Plugin Boilerplate</p>
<ul>
<li>https://github.com/tommcfarlin/WordPress-Plugin-Boilerplate</li>
</ul>
<p>WordPress Plugin Bootstrap</p>
<ul>
<li>https://github.com/claudiosmweb/wordpress-plugin-boilerplate</li>
</ul>
<p>WP Skeleton Plugin</p>
<ul>
<li>https://github.com/ptahdunbar/wp-skeleton-plugin</li>
</ul>
<h3 id="3-building-a-wordpress-plugin">3. Building a WordPress Plugin</h3>
<h4 id="30-create-the-plugin-directory-and-files">3.0 Create the plugin directory and files</h4>
<p>Create main plugin folder</p>
<ul>
<li>wp-content/plugins/myplugin/</li>
</ul>
<p>Create main plugin file in myplugin/ with same name as plugin folder</p>
<p><strong>MyPlugin Architecture:</strong></p>
<pre class="hljs"><code><div>myplugin/
  myplugin.php
  index.php
  license.txt
  readme.txt
  
  admin/
    css/
    js/
  public/
    css/
    js/
  includes/
  languages/
</div></code></pre>
<p>includes: anything in this folder can be used anywhere (admin or public); great for common PHP files</p>
<p>languages: anything related to translating and localization. We will leave this folder empty until later in the course</p>
<p>4:00</p>
<p>index.php</p>
<p>index.php: empty file with simple comment that prevents the public from viewing the contents of our plugin directory</p>
<pre class="hljs"><code><div><span class="hljs-meta">&lt;?php</span> <span class="hljs-comment">// Silence is golden.</span>
</div></code></pre>
<p>Add same index file to the other plugin folders in root:</p>
<ul>
<li>admin, includes, languages, public</li>
</ul>
<p>We don't need to add index files to the assets folders (css/js) because they are already viewable in the source code inspector, and thus would be pointless to try to block</p>
<p>myplugin.php</p>
<p>myplugin.php: main plugin file</p>
<p>EX: 03-01 &gt; code-file-header-complete.txt</p>
<p>Let's keep things simple and go with the basic file header since this is just a demo.</p>
<p>#GOTCHA: Make sure to add the full file header when ready to publish to WordPress plugin directory</p>
<p>EX: 03-01 &gt; code-file-header-basic.txt</p>
<pre class="hljs"><code><div><span class="hljs-meta">&lt;?php</span>
<span class="hljs-comment">/*
Plugin Name:  MyPlugin
Description:  Example plugin fo rthe video tutorial series, "WordPress: Plugin Development", available at Lynda.com.
Plugin URI:   https://profiles.wordpress.org/specialk
Author:       Jeff Starr
Version:      1.0
Text Domain:  myplugin
Domain Path:  /languages
License:      GPL v2 OR later
License URI:  https://www.gnu.org/licenses/gpl-2.0.txt
*/</span>
</div></code></pre>
<p>license.txt: copy of standard GPL text file. Including a copy required by GPL license.</p>
<p>http://www.gnu.org/licenses/gpl-2.0.txt</p>
<p>readme.txt: tells all users about your plugin; the documentation and needs to be formatted properly</p>
<p>Example Readme file provided by WordPress.org: https://wordpress.org/plugins/readme.txt</p>
<p>Let' use our own file header from main plugin file</p>
<p>#GOTCHA: Leave the === Plugin Name === part at top alone</p>
<p>After plugin is complete we can flesh out the rest of the readme.txt file and replace placeholders with our information</p>
<p>EX: 03-01 &gt; code-prevent-direct-file-access.txt</p>
<pre class="hljs"><code><div><span class="hljs-comment">// exit if file is called directly</span>
<span class="hljs-keyword">if</span> ( ! defined( <span class="hljs-string">'ABSPATH'</span> ) ) {
  <span class="hljs-keyword">exit</span>;
}
</div></code></pre>
<p>Add this security snippet before any other PHP plugin code.</p>
<ul>
<li>in main plugin file</li>
<li>NOT in blank index files</li>
</ul>
<p>STARTER TEMPLATE / BOILERPLATE</p>
<p>As long as there is a correctly formatted file header the plugin should show up on Plugins page, even if there's no code to do anything yet</p>
<h4 id="31-add-administration-menus">3.1 Add administration menus</h4>
<p>We will add a menu item in the wp admin menu</p>
<p>Where to add menu item?</p>
<ul>
<li>2 choices: Top-level or Submenu</li>
</ul>
<p>Top Level Menu vs. Sub-Level:</p>
<p>Top-level menu:</p>
<ul>
<li>May contain submenus</li>
<li>Best for plugins with multiple settings pages</li>
</ul>
<p>Sub-level menu:</p>
<ul>
<li>Added to existing top-level menu</li>
<li>Best for plugins with only one settings page</li>
</ul>
<p>Adding a Top-Level Menu:</p>
<p>First, add the function to display our plugin settings page:</p>
<p>EX: 03-02 &gt; 01-code-display-settings.txt</p>
<p>Add this code to bottom of main plugin file</p>
<pre class="hljs"><code><div><span class="hljs-comment">// display the plugin settings page</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">myplugin_display_settings_page</span><span class="hljs-params">()</span> </span>{
  
  <span class="hljs-comment">// check if user is allowed access</span>
  <span class="hljs-keyword">if</span> ( ! current_user_can( <span class="hljs-string">'manage_options'</span> ) ) <span class="hljs-keyword">return</span>;
  
  <span class="hljs-meta">?&gt;</span>
  
  &lt;div <span class="hljs-class"><span class="hljs-keyword">class</span>="<span class="hljs-title">wrap</span>"&gt;
    
    &lt;<span class="hljs-title">h1</span>&gt;&lt;?<span class="hljs-title">php</span> <span class="hljs-title">echo</span> <span class="hljs-title">esc_html</span>( <span class="hljs-title">get_admin_page_title</span>() ): ?&gt;&lt;/<span class="hljs-title">h1</span>&gt;
    &lt;<span class="hljs-title">form</span> <span class="hljs-title">action</span>="<span class="hljs-title">options</span>.<span class="hljs-title">php</span>" <span class="hljs-title">method</span>="<span class="hljs-title">post</span>"&gt;
    
      &lt;?<span class="hljs-title">php</span>
      
      // <span class="hljs-title">output</span> <span class="hljs-title">security</span> <span class="hljs-title">fields</span>
      <span class="hljs-title">settings_fields</span>( '<span class="hljs-title">myplugin_options</span>' );
      
      // <span class="hljs-title">output</span> <span class="hljs-title">settings</span> <span class="hljs-title">sections</span>
      <span class="hljs-title">do_settings_sections</span>( '<span class="hljs-title">myplugin</span>' );
      
      // <span class="hljs-title">submit</span> <span class="hljs-title">button</span>
      <span class="hljs-title">submit_button</span>();
      
      ?&gt;
    
    &lt;/<span class="hljs-title">form</span>&gt;
  
  &lt;/<span class="hljs-title">div</span>&gt;
  
  &lt;?<span class="hljs-title">php</span>
  
}
</span></div></code></pre>
<ul>
<li>
<p>Check if user has permission to access the plugin page</p>
</li>
<li>
<p>If yes, output markup to display the page</p>
</li>
<li>
<p>get_admin_page_title() - displays plugin name as page heading</p>
</li>
<li>
<p>Form action must be &quot;options.php&quot; and method must be &quot;post&quot;</p>
</li>
<li>
<p>settings_fields() - output requried security fields; param is the name of settings group to display</p>
</li>
<li>
<p>do_settings_sections() - output markup to display the plugin settings; parm is name of menu slug</p>
</li>
<li>
<p>submit_button() - displays submit button</p>
</li>
</ul>
<p>#GOTCHA: User can't get to settings page without a menu item</p>
<p>EX: 03-02 &gt; 02-code-add-toplevel-menu.txt</p>
<p>Add this to bottom of main plugin file</p>
<pre class="hljs"><code><div><span class="hljs-comment">// add top-level administrative menu</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">myplugin_add_toplevel_menu</span><span class="hljs-params">()</span> </span>{
  
  <span class="hljs-comment">/*
    add_menu_page(
      string $page_title,
      string $menu_title,
      string $capability,
      string $menu_slug,
      callable $function = '',
      string $icon_url = '',
      int $position = null
    )  
  */</span>
  
  add_menu_page(
    <span class="hljs-string">'MyPlugin Settings'</span>,
    <span class="hljs-string">'MyPlugin'</span>,
    <span class="hljs-string">'manage_options'</span>,
    <span class="hljs-string">'myplugin'</span>,
    <span class="hljs-string">'myplugin_display_settings_page'</span>,
    <span class="hljs-string">'dashicons-admin-generic'</span>,
    <span class="hljs-keyword">null</span>
  );
  
}
add_action( <span class="hljs-string">'admin_menu'</span>, <span class="hljs-string">'myplugin_add_toplevel_menu'</span> );
</div></code></pre>
<p>add_menu_page() - adds plugin to the settings menu</p>
<p>Parameters:</p>
<ul>
<li>Plugin page title</li>
<li>Title of menu item</li>
<li>Required user capability (should be manage options unless you have a good reason to do otherwise)</li>
<li>Menu slug (used for url of plugin page. good idea to use name of plugin)</li>
<li>Callback function that will display the plugin page. Should match name of function we added at top; myplugin_display_settings_page(), in this case)</li>
<li>Menu icon: generic dash icon (cog wheel /gear)</li>
<li>Menu priority: high number, lower (vertically) menu will appear in the Dashboard admin menu. Zero &quot;0&quot; will make it appear at very top. Best to leave it at &quot;null&quot; to avoid clashes</li>
</ul>
<p>With all parameters define, let's now REGISTER this function with the proper hook</p>
<p>For admin menus, use the &quot;admin_menu()&quot; action hook</p>
<hr>
<p>6:00</p>
<p>Sub-level menu item:</p>
<p>To add sub-level menu item we need to remove the top-level menu function we just added</p>
<p>ADD sublevel function from exercise files</p>
<p>EX: 03-02 &gt; 03-code-add-sublevel-menu.txt</p>
<p>Now add this code to add a sublevel menu:</p>
<pre class="hljs"><code><div><span class="hljs-comment">// add sub-level administrative menu</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">myplugin_add_sublevel_menu</span><span class="hljs-params">()</span> </span>{
  
  <span class="hljs-comment">/*
  
  add_submenu_page(
    string    $parent_slug,
    string    $page_title,
    string    $menu_title,
    string    $capability,
    string    $menu_slug,
    callable  $function = ''
  );
  
  */</span>
  
  add_submenu_page(
    <span class="hljs-string">'options-general.php'</span>,
    <span class="hljs-string">'MyPlugin Settings'</span>,
    <span class="hljs-string">'MyPlugin'</span>,
    <span class="hljs-string">'manage_options'</span>,
    <span class="hljs-string">'myplugin'</span>,
    <span class="hljs-string">'myplugin_display_settings_page'</span>
  );
}
add_action(<span class="hljs-string">'admin_menu'</span>, <span class="hljs-string">'myplugin_add_sublevel_menu'</span>);
</div></code></pre>
<p>The main difference is here we are using the add_submenu_page() function instead of add_toplevel_page()</p>
<p>Parameters:</p>
<ul>
<li>Parent slug: determines toplevel menu to which our plugin will be added</li>
</ul>
<p>Parent Slugs for add_submenu_page():</p>
<ul>
<li>Dashboard menu - index.php</li>
<li>Posts - edit.php</li>
<li>Pages - edit.php?post_type=page</li>
<li>Media = upload.php</li>
<li>Comments = edit-comments.php</li>
<li>Themes - themes.php</li>
</ul>
<p>Parent Slugs for add_submenu_page():</p>
<ul>
<li>
<p>Plugins - plugins.php</p>
</li>
<li>
<p>Users - users.php</p>
</li>
<li>
<p>Tools - tools.php</p>
</li>
<li>
<p>Settings - options-general.php</p>
</li>
<li>
<p>For this plugin (and most plugins) we want to display the menu item under the settings menu, so we use &quot;options-general.php&quot; for the first parameter</p>
</li>
</ul>
<p>The remaining params are almost same as for toplevel</p>
<p>7:40</p>
<p>Organize by moving our two new functions into their own files</p>
<p>Create new file admin/admin-menu.php</p>
<pre class="hljs"><code><div><span class="hljs-meta">&lt;?php</span> <span class="hljs-comment">// MyPlugin - Admin Menu</span>

myplugin_add_sublevel_menu()
</div></code></pre>
<p>Create new file admin/settings-page.php</p>
<pre class="hljs"><code><div><span class="hljs-meta">&lt;?php</span> <span class="hljs-comment">// MyPlugin - Settings Page</span>
</div></code></pre>
<p>Move display settings func into this file</p>
<p>Add the no direct access code (ABSPATH) to each of these two new files, before any other PHP code</p>
<p>Next, include each of these new files in main plugin file:</p>
<pre class="hljs"><code><div><span class="hljs-comment">// if admin area</span>
<span class="hljs-keyword">if</span> ( is_admin() ) {
  
  <span class="hljs-comment">// include dependencies</span>
  <span class="hljs-keyword">require_once</span> plugin_dir_path( <span class="hljs-keyword">__FILE__</span> ) . <span class="hljs-string">'admin/admin-menu.php'</span>;
  <span class="hljs-keyword">require_once</span> plugin_dir_path( <span class="hljs-keyword">__FILE__</span> ) . <span class="hljs-string">'admin/setttings-page.php'</span>;
  
}
</div></code></pre>
<h4 id="32-add-the-plugin-settings-page">3.2 Add the plugin settings page</h4>
<p>Use the Settings API</p>
<p>Step 1: Planning:</p>
<ul>
<li>Which settings to we need?</li>
</ul>
<p>Hello Dolly has zero settings</p>
<p>Akismet has its own sub-level menu item under the Settings menu. And it also has its own settings page where the plugin can be customized</p>
<p>Any options we add will be displayed on the settings page</p>
<p>Plugin Planning:</p>
<p>Our plugin will display its settings in 2 section</p>
<p>Custom login page:</p>
<ul>
<li>URL for login link</li>
<li>Title attribute for login link</li>
<li>Enable custom login styles</li>
<li>Custom login message</li>
</ul>
<p>Customize Admin Area:</p>
<ul>
<li>Custom footer text</li>
<li>Remove toolbar items</li>
<li>Choose admin color scheme</li>
</ul>
<p>Customize login page:</p>
<p>Plan the types of field to use</p>
<ul>
<li>URL for login link              -&gt; Text input   <input type="text"></li>
<li>Title attribute for login link  -&gt; Text input   <input type="text"></li>
<li>Enable custom login styles      -&gt; Radio input  <input type="radio"></li>
<li>Custom login message            -&gt; Textarea     <textarea></li>
</ul>
<p>Customize admin area:</p>
<ul>
<li>Custom footer text              -&gt; Text input   <input type="text"></li>
<li>Remove toolbar items            -&gt; Checkbox     <input type="checkbox"></li>
<li>Choose admin color scheme       -&gt; Select menu  <select></li>
</ul>
<p>HTML Fields:</p>
<p>Here are the general field types that can be used in any plugin</p>
<ul>
<li>Text input    <input type="text"></li>
<li>Radio input   <input type="radio"></li>
<li>Checkbox      <input type="checkbox"></li>
<li>Textarea      <textarea></li>
<li>Select menu   <select></li>
</ul>
<p>Register Setting:</p>
<p>To add a setting we first need to REGISTER it with the register_setting() function</p>
<p>EX: 03-03 &gt; 01-code-register-settings.txt</p>
<p>Add register setting code at bottom of main plugin file</p>
<pre class="hljs"><code><div><span class="hljs-comment">// register plugin settings</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">myplugin_register_settings</span><span class="hljs-params">()</span> </span>{
  
  <span class="hljs-comment">/*
  
  register_setting(
    string    $option_group,
    string    $option_name,
    callable $sanitize_callback
  );
  
  */</span>
  
  register_setting(
    <span class="hljs-string">'myplugin_options'</span>,
    <span class="hljs-string">'myplugin_options'</span>,
    <span class="hljs-string">'myplugin_callback_validate_options'</span>
  );
  
}
add_action( <span class="hljs-string">'admin_init'</span>, <span class="hljs-string">'myplugin_register_settings'</span> );
</div></code></pre>
<p>Parameter 1 of register_settings() must match parameter 1 of settings_fields() in settings-page.php display settings page function</p>
<p>Param 2: used for retrieving the option from the database</p>
<p>Parm 3: callback function to validate the settings</p>
<p>Register function with admin_init() hook - fires only in admin area</p>
<p>Next, define validation function</p>
<p>EX: 03-03 &gt; 02-code-validate-settings.txt</p>
<pre class="hljs"><code><div><span class="hljs-comment">// validate plugin settings</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">myplugin_validate_options</span><span class="hljs-params">($input)</span> </span>{
  
  <span class="hljs-comment">// <span class="hljs-doctag">todo:</span> add validation functionality ...</span>
  
  <span class="hljs-keyword">return</span> $input;
  
}
</div></code></pre>
<p>3:48</p>
<p>We have now successfully registered our plugin settings <img class="emoji" alt="smiley" src="data:image/png;base64,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" /></p>
<ul>
<li>inlcluedes register_settings function and validation function</li>
</ul>
<hr>
<p>NEXT, add 2 sections for settings</p>
<p>EX: 03-03 &gt; 03-code-add-settings-section.txt</p>
<pre class="hljs"><code><div><span class="hljs-comment">/*

add_settings_section(
  string    $id,
  string    $title,
  callable  $callback,
  string    $page
);

*/</span>

add_settings_section(
  <span class="hljs-string">'myplugin_section_login'</span>,
  <span class="hljs-string">'Customize Login Page'</span>,
  <span class="hljs-string">'myplugin_callback_section_login'</span>,
  <span class="hljs-string">'myplugin'</span>
);

add_settings_section(
  <span class="hljs-string">'myplugin_section_admin'</span>,
  <span class="hljs-string">'Customize Admin Area'</span>,
  <span class="hljs-string">'myplugin_callback_section_admin'</span>,
  <span class="hljs-string">'myplugin'</span>
);
</div></code></pre>
<p>Add to existing function myplugin_register_settings()</p>
<p>Param 1: section ID
Param 2: section title (displayed as section heading)
Param 3: Callback function - display description of the section
Param 4: Menu slug of page on which to be displayed</p>
<p>Now, ADD the two callback functions at the bottom of the main plugin file</p>
<p>EX: 03-03 &gt; 04-code-section-callbacks.txt</p>
<pre class="hljs"><code><div>
<span class="hljs-comment">// callback: login section</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">myplugin_callback_section_login</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-keyword">echo</span> <span class="hljs-string">'&lt;p&gt;These settings enable you to customize the WP Login screen.&lt;/p&gt;'</span>;
}

<span class="hljs-comment">// callback: admin section</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">myplugin_callback_section_admin</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-keyword">echo</span> <span class="hljs-string">'&lt;p&gt;These settings enable you to customize the WP Admin Area.&lt;/p&gt;'</span>;
}
</div></code></pre>
<p>FINAL STEP: Add settings fields</p>
<p>EX: 03-03 &gt; 05-code-add-settings-fields.txt</p>
<p>#GOTCHA: Looks like a lot of code, but it is mostly repetitive patterns</p>
<p>ADD the code inside our existing register_settings() function</p>
<pre class="hljs"><code><div>
<span class="hljs-comment">// one of the login section fields</span>
add_settings_field(
  <span class="hljs-string">'custom_url'</span>,
  <span class="hljs-string">'Custom URL'</span>,
  <span class="hljs-string">'myplugin_callback_field_text'</span>,
  <span class="hljs-string">'myplugin'</span>,
  <span class="hljs-string">'myplugin_section_login'</span>,
  [ <span class="hljs-string">'id'</span> =&gt; <span class="hljs-string">'custom_url'</span>, <span class="hljs-string">'label'</span> =&gt; <span class="hljs-string">'Custom URL for the login logo link'</span> ]
);

...

<span class="hljs-comment">// one of the admin section fields</span>
add_settings_field(
  <span class="hljs-string">'custom_footer'</span>,
  <span class="hljs-string">'Custom Footer'</span>,
  <span class="hljs-string">'myplugin_callback_field_text'</span>,
  <span class="hljs-string">'myplugin'</span>,
  <span class="hljs-string">'myplugin_section_admin'</span>,
  [ <span class="hljs-string">'id'</span> =&gt; <span class="hljs-string">'custom_footer'</span>, <span class="hljs-string">'label'</span>   =&gt; <span class="hljs-string">'Custom footer text'</span> ]
);

</div></code></pre>
<p>7 settings for this plugin</p>
<p>Param 1: setting ID -- for retrieving from database
Param 2: setting Title (displayed on page)
Param 3: callback function - output markup to display the settings</p>
<p>#GOTCHA: We will add the callback functions in the next video</p>
<p>Param 4: page on which to display the settings. should be same as menu slug in add_submenu_page function</p>
<p>Param 5: section that should display the setting . should match the section ID in add_settings_section func</p>
<p>Param 6: Array of anything we want to pass to the callback func. Including field ID and label</p>
<p>ADD callback functions</p>
<p>EX: 03-03 &gt; 06-code-settings-callbacks.txt</p>
<p>Add the callback code at end of main plugin file</p>
<p>#GOTCHA: For now, callback functions are simple text placeholders to show us they are working</p>
<pre class="hljs"><code><div><span class="hljs-comment">// callback: text field</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">myplugin_callback_field_text</span><span class="hljs-params">($args)</span> </span>{
  
  <span class="hljs-comment">// <span class="hljs-doctag">todo:</span> add callback functionality..</span>
  
  <span class="hljs-keyword">echo</span> <span class="hljs-string">'This will be a text field.'</span>;
}

<span class="hljs-comment">// callback: radio field</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">myplugin_callback_field_radio</span><span class="hljs-params">($args)</span> </span>{
  
  <span class="hljs-comment">// <span class="hljs-doctag">todo:</span> add callback functionality..</span>
  
  <span class="hljs-keyword">echo</span> <span class="hljs-string">'This will be a radio field'</span>;
}

<span class="hljs-comment">// these are the other callback field types</span>
myplugin_callback_field_textarea($args)

myplugin_callback_field_checkbox($args)

myplugin_callback_field_select($args)
</div></code></pre>
<p>Let's Organize our settings code with two new files</p>
<p>admin/settings-register.php
admin/settings-callbacks.php</p>
<ul>
<li>
<p>MOVE the appropriate sections into their new homes</p>
</li>
<li>
<p>ADD the prevent direct access snippet to top of each file (under file header)</p>
</li>
<li>
<p>Add require_once statements for each of these two files in main plugin file</p>
<h4 id="33-add-settings-callback-functions">3.3 Add settings callback functions</h4>
</li>
</ul>
<p>We are working in settings-callbacks.php</p>
<p>We will complete the 5 field callback functions in this video</p>
<p>EX: 03-04 &gt; 01-code-get-plugin-options.txt</p>
<pre class="hljs"><code><div><span class="hljs-comment">// default plugin options</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">myplugin_options_default</span><span class="hljs-params">()</span> </span>{
  
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">array</span>(
    <span class="hljs-string">'custom_url'</span>        =&gt; <span class="hljs-string">'https://wordpress.org/'</span>,
    <span class="hljs-string">'custom_title'</span>      =&gt; <span class="hljs-string">'Powered by wordPress'</span>,
    <span class="hljs-string">'custom_style'</span>      =&gt; <span class="hljs-string">'disable'</span>,
    <span class="hljs-string">'custom_message'</span>    =&gt; <span class="hljs-string">'&lt;p class="custom-message"&gt;My custom message&lt;/p&gt;'</span>,
    <span class="hljs-string">'custom_footer'</span>     =&gt; <span class="hljs-string">'Special message for users'</span>,
    <span class="hljs-string">'custom_toolbar'</span>    =&gt; <span class="hljs-keyword">false</span>,
    <span class="hljs-string">'custom_scheme'</span>     =&gt; <span class="hljs-keyword">default</span>,
  );
  
}
</div></code></pre>
<p>ADD this function directly to the main plugin file</p>
<p>Returns an array containing default values for our plugin settings. They are used by the plugins until user makes changes on settings page.</p>
<p>REPLACE the text field callback placeholder with something more complete</p>
<p>EX: 03-04 &gt; 02-code-settings-callbacks.txt</p>
<p>Just grab the first function for now and paste it over the one in settings-callbacks.php</p>
<pre class="hljs"><code><div><span class="hljs-comment">// callback: text field</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">myplugin_callback_field_text</span><span class="hljs-params">($args)</span> </span>{
  
  $options = get_option(<span class="hljs-string">'myplugin_options'</span>, myplugin_options_default());
  
  $id     = <span class="hljs-keyword">isset</span>($args[<span class="hljs-string">'id'</span>])    ? $args[<span class="hljs-string">'id'</span>]    : <span class="hljs-string">''</span>;
  $label  = <span class="hljs-keyword">isset</span>($args[<span class="hljs-string">'label'</span>]) ? $args[<span class="hljs-string">'label'</span>] : <span class="hljs-string">''</span>;
  
  $value  = <span class="hljs-keyword">isset</span>($options[<span class="hljs-string">'id'</span>]) ? sanitize_text_field($options[$id]) : <span class="hljs-string">''</span>;
  
  <span class="hljs-keyword">echo</span> <span class="hljs-string">'&lt;input id="myplugin_options_'</span> . $id . <span class="hljs-string">'" name="myplugin_options['</span> . $id . <span class="hljs-string">']" type="text" size="40" value="'</span> . $value . <span class="hljs-string">'"&gt;&lt;br /&gt;'</span>;
  <span class="hljs-keyword">echo</span> <span class="hljs-string">'&lt;label for="myplugin_options_'</span> . $id . <span class="hljs-string">'"&gt;'</span> . $label . <span class="hljs-string">'&lt;/label&gt;'</span>;
  
}
</div></code></pre>
<p>1st define variables</p>
<p>Then output field markup</p>
<p>Use get_option to get plugin options from the database</p>
<p>Option name is defined in 2nd param of settings register function
Param 2: specified default options to use if plugin options not found in database</p>
<p>$args is defined in the add_settings_field function calls</p>
<p>Next, define the field value and sanitize with sanitize_text_field() function</p>
<p>Now, will all the variables defined, we output the HTML required to display the text input field</p>
<p>We are using the previously defined variables for the tag attributes</p>
<pre class="hljs"><code><div><span class="hljs-comment">// callback: radio field</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">myplugin_callback_field_radio</span><span class="hljs-params">($args)</span> </span>{
  
  $options = get_option(<span class="hljs-string">'myplugin_options'</span>, myplugin_options_default());
  
  $id     = <span class="hljs-keyword">isset</span>($args[<span class="hljs-string">'id'</span>])    ? $args[<span class="hljs-string">'id'</span>]    : <span class="hljs-string">''</span>;
  $label  = <span class="hljs-keyword">isset</span>($args[<span class="hljs-string">'label'</span>]) ? $args[<span class="hljs-string">'label'</span>] : <span class="hljs-string">''</span>;
  
  $selected_option = <span class="hljs-keyword">isset</span>($options[$id]) ? sanitize_text_field($options[$id]) : <span class="hljs-string">''</span>;
  
  $radio_options = <span class="hljs-keyword">array</span>(
    
    <span class="hljs-string">'enable'</span>  =&gt; <span class="hljs-string">'Enable custom styles'</span>,
    <span class="hljs-string">'disable'</span> =&gt; <span class="hljs-string">'Disable custom styles'</span>
  );
  
  <span class="hljs-keyword">foreach</span> ($radio_options <span class="hljs-keyword">as</span> $value =&gt; $label) {
    
    $checked = checked($selected_option === $value, <span class="hljs-keyword">true</span>, <span class="hljs-keyword">false</span>);
    
    <span class="hljs-keyword">echo</span> <span class="hljs-string">'&lt;label&gt;&lt;input name="myplugin_options['</span> . $id . <span class="hljs-string">']" type="radio" value="'</span> . $value . <span class="hljs-string">'"'</span> . $checked . <span class="hljs-string">'&gt; '</span>;
    <span class="hljs-keyword">echo</span> <span class="hljs-string">'&lt;span&gt;'</span> . $label . <span class="hljs-string">'&lt;/span&gt;&lt;/label&gt;&lt;br /&gt;'</span>;
    
  }
}
</div></code></pre>
<p>Check if current radio option is selected using checked() function</p>
<p>REPLACE Textarea callback</p>
<pre class="hljs"><code><div><span class="hljs-comment">// callback: textarea field</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">myplugin_callback_field_textarea</span><span class="hljs-params">($args)</span> </span>{
  
  $options = get_option(<span class="hljs-string">'myplugin_options'</span>, myplugin_options_default());
  
  $id     = <span class="hljs-keyword">isset</span>($args[<span class="hljs-string">'id'</span>])    ? $args[<span class="hljs-string">'id'</span>]    : <span class="hljs-string">''</span>;
  $label  = <span class="hljs-keyword">isset</span>($args[<span class="hljs-string">'label'</span>]) ? $args[<span class="hljs-string">'label'</span>] : <span class="hljs-string">''</span>;
  
  $allowed_tags = wp_kses_allowed_html(<span class="hljs-string">'post'</span>);
  
  $value = <span class="hljs-keyword">isset</span>($options[$id]) ? wp_kses(stripslashes_deep($options[$id]), $allowed_tags) : <span class="hljs-string">''</span>;
  
  <span class="hljs-keyword">echo</span> <span class="hljs-string">'&lt;textarea id="myplugin_options_'</span> . $id . <span class="hljs-string">'" name="myplugin_options['</span> . $id . <span class="hljs-string">']" rows="5" cols="50"&gt;'</span> . $value . <span class="hljs-string">'&lt;/textarea&gt;&lt;br /&gt;'</span>;
  <span class="hljs-keyword">echo</span> <span class="hljs-string">'&lt;label for="myplugin_options_'</span> . $id . <span class="hljs-string">'"&gt;'</span> . $label . <span class="hljs-string">'&lt;/label&gt;'</span>;

}
</div></code></pre>
<p>wp_kses_allowed_html gives us an array of allowed HTML tags. This enables user to add basic markup to the textarea box</p>
<p>NEXT replace the checkbox callback</p>
<pre class="hljs"><code><div><span class="hljs-comment">// callback: checkbox field</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">myplugin_callback_field_checkbox</span><span class="hljs-params">($args)</span> </span>{
  
  $options = get_option(<span class="hljs-string">'myplugin_options'</span>, myplugin_options_default());
  
  $id     = <span class="hljs-keyword">isset</span>($args[<span class="hljs-string">'id'</span>])    ? $args[<span class="hljs-string">'id'</span>]    : <span class="hljs-string">''</span>;
  $label  = <span class="hljs-keyword">isset</span>($args[<span class="hljs-string">'label'</span>]) ? $args[<span class="hljs-string">'label'</span>] : <span class="hljs-string">''</span>;
  
  $checked = <span class="hljs-keyword">isset</span>($options[$id]) ? checked($options[$id], <span class="hljs-number">1</span>, <span class="hljs-keyword">false</span>) : <span class="hljs-string">''</span>;
  
  <span class="hljs-keyword">echo</span> <span class="hljs-string">'&lt;input id="myplugin_options_'</span> . $id . <span class="hljs-string">'" name="myplugin_options['</span> . $id . <span class="hljs-string">']" type="checkbox" value="1"'</span> . $checked . <span class="hljs-string">'&gt; '</span>;
  <span class="hljs-keyword">echo</span> <span class="hljs-string">'&lt;label for="myplugin_options_'</span> . $id . <span class="hljs-string">'"&gt;'</span> . $label . <span class="hljs-string">'&lt;/label&gt;'</span>;
  
}
</div></code></pre>
<p>checked() function determines whether or not the checkbox should be select</p>
<p>FINALLY, replace the select callback</p>
<pre class="hljs"><code><div><span class="hljs-comment">// callback: select field</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">myplugin_callback_field_select</span><span class="hljs-params">($args)</span>
</span>{

  $options = get_option(<span class="hljs-string">'myplugin_options'</span>, myplugin_options_default());

  $id    = <span class="hljs-keyword">isset</span>($args[<span class="hljs-string">'id'</span>])    ? $args[<span class="hljs-string">'id'</span>]    : <span class="hljs-string">''</span>;
  $label = <span class="hljs-keyword">isset</span>($args[<span class="hljs-string">'label'</span>]) ? $args[<span class="hljs-string">'label'</span>] : <span class="hljs-string">''</span>;

  $selected_option = <span class="hljs-keyword">isset</span>($options[$id]) ? sanitize_text_field($options[$id]) : <span class="hljs-string">''</span>;

  $select_options = <span class="hljs-keyword">array</span>(

    <span class="hljs-string">'default'</span>   =&gt; <span class="hljs-string">'Default'</span>,
    <span class="hljs-string">'light'</span>     =&gt; <span class="hljs-string">'Light'</span>,
    <span class="hljs-string">'blue'</span>      =&gt; <span class="hljs-string">'Blue'</span>,
    <span class="hljs-string">'coffee'</span>    =&gt; <span class="hljs-string">'Coffee'</span>,
    <span class="hljs-string">'ectoplasm'</span> =&gt; <span class="hljs-string">'Ectoplasm'</span>,
    <span class="hljs-string">'midnight'</span>  =&gt; <span class="hljs-string">'Midnight'</span>,
    <span class="hljs-string">'ocean'</span>     =&gt; <span class="hljs-string">'Ocean'</span>,
    <span class="hljs-string">'sunrise'</span>   =&gt; <span class="hljs-string">'Sunrise'</span>,

  );

  <span class="hljs-keyword">echo</span> <span class="hljs-string">'&lt;select id="myplugin_options_'</span> . $id . <span class="hljs-string">'" name="myplugin_options['</span> . $id . <span class="hljs-string">']"&gt;'</span>;

  <span class="hljs-keyword">foreach</span> ($select_options <span class="hljs-keyword">as</span> $value =&gt; $option) {

    $selected = selected($selected_option === $value, <span class="hljs-keyword">true</span>, <span class="hljs-keyword">false</span>);

    <span class="hljs-keyword">echo</span> <span class="hljs-string">'&lt;option value="'</span> . $value . <span class="hljs-string">'"'</span> . $selected . <span class="hljs-string">'&gt;'</span> . $option . <span class="hljs-string">'&lt;/option&gt;'</span>;
  }

  <span class="hljs-keyword">echo</span> <span class="hljs-string">'&lt;/select&gt; &lt;label for="myplugin_options_'</span> . $id . <span class="hljs-string">'"&gt;'</span> . $label . <span class="hljs-string">'&lt;/label&gt;'</span>;
}
</div></code></pre>
<p>$selected_option = isset( $optins[$id] );</p>
<p>$select_options = array(</p>
<p>'default'     =&gt; 'Default',
'light'       =&gt; 'Light',
...
'sunrise'     =&gt; 'Sunrise',</p>
<p>);</p>
<p>selected() function checks to see if the current option is selected</p>
<p>Check the debug.log file for errors</p>
<p>(Confirmed: The file created itself when we enabled WP_DEBUG_LOG earlier <img class="emoji" alt="smiley" src="data:image/png;base64,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" /></p>
<p>Cleared debug log because errors were resolved</p>
<h4 id="34-validate-plugin-settings">3.4 Validate plugin settings</h4>
<h4 id="35-add-custom-functionality">3.5 Add custom functionality</h4>
<h4 id="36-include-javascript-and-css">3.6 Include JavaScript and CSS</h4>
<h4 id="37-plugin-internationalization">3.7 Plugin internationalization</h4>
<h4 id="38-add-an-uninstall-feature">3.8 Add an uninstall feature</h4>
<h4 id="39-test-and-debug">3.9 Test and debug</h4>
<h3 id="4-essential-plugin-techniques">4. Essential Plugin Techniques</h3>
<h4 id="40-customize-the-wordpress-loop">4.0 Customize the WordPress loop</h4>
<h4 id="41-create-widgets">4.1 Create widgets</h4>
<h4 id="42-manage-users-and-roles">4.2 Manage users and roles</h4>
<h4 id="43-work-with-javascript-and-css">4.3 Work with JavaScript and CSS</h4>
<h4 id="44-use-the-options-api">4.4 Use the Options API</h4>
<h3 id="5-extending-plugin-functionality">5. Extending Plugin Functionality</h3>
<h4 id="50-add-custom-post-types-and-taxonomies">5.0 Add custom post types and taxonomies</h4>
<h4 id="51-work-with-custom-fields">5.1 Work with custom fields</h4>
<h4 id="52-add-meta-boxes">5.2 Add meta boxes</h4>
<h4 id="53-work-with-custom-database-queries">5.3 Work with custom database queries</h4>
<h4 id="54-integrate-admin-notices">5.4 Integrate admin notices</h4>
<h3 id="6-advanced-plugin-techniques">6. Advanced Plugin Techniques</h3>
<h4 id="60-use-the-transients-api">6.0 Use the Transients API</h4>
<h4 id="61-use-the-http-api">6.1 Use the HTTP API</h4>
<h4 id="62-use-wp-cron">6.2 Use WP-Cron</h4>
<h4 id="63-implement-ajax">6.3 Implement Ajax</h4>
<h4 id="64-use-the-rest-api">6.4 Use the REST API</h4>
<h4 id="65-develop-with-gutenberg">6.5 Develop with Gutenberg</h4>
<h3 id="7-conclusion">7. Conclusion</h3>
<h4 id="70-next-steps">7.0 Next steps</h4>
<hr>
<h2 id="resources--reference">RESOURCES &amp; REFERENCE</h2>
<ul>
<li>https://www.linkedin.com/learning/instructors/nigel-french)</li>
</ul>
<h2 id="end-03---fin">--- [END 03 - FIN]</h2>
<h2 id="u----last-place-u"><u>---{ LAST PLACE }</u></h2>

</body>
</html>
